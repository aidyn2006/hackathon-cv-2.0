# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ß—Ç–æ –±—ã–ª–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:

### 1. **–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω –º–µ–¥–ª–µ–Ω–Ω—ã–π `fastNlMeansDenoising` –Ω–∞ –±—ã—Å—Ç—Ä—ã–π `GaussianBlur`
- ‚úÖ –£–±—Ä–∞–Ω `auto_rotate` (—Å–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)
- ‚úÖ –£–±—Ä–∞–Ω `sharpen_for_signature` –≤ –±—ã—Å—Ç—Ä–æ–º —Ä–µ–∂–∏–º–µ
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
  - Deskew (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∫–ª–æ–Ω–∞)
  - CLAHE (—É–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞)

### 2. **–£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è YOLO**
- ‚ùå –ë—ã–ª–æ: `imgsz=1280` (–º–µ–¥–ª–µ–Ω–Ω–æ, –Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)
- ‚úÖ –°—Ç–∞–ª–æ: `imgsz=640` (–±—ã—Å—Ç—Ä–æ, —Ö–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** ~4x –±—ã—Å—Ç—Ä–µ–µ

### 3. **–°–Ω–∏–∂–µ–Ω DPI –¥–ª—è PDF –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**
- ‚ùå –ë—ã–ª–æ: `dpi=300` (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–µ–¥–ª–µ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- ‚úÖ –°—Ç–∞–ª–æ: `dpi=200` (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –±—ã—Å—Ç—Ä–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** ~2x –±—ã—Å—Ç—Ä–µ–µ

### 4. **–û—Ç–∫–ª—é—á–µ–Ω verbose —Ä–µ–∂–∏–º YOLO**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `verbose=False` –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ –≤—ã–≤–æ–¥–∞

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë—ã–ª–æ (–º–µ–¥–ª–µ–Ω–Ω–æ) | –°—Ç–∞–ª–æ (–±—ã—Å—Ç—Ä–æ) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|----------|----------------|----------------|-----------|
| DPI | 300 | 200 | 2x |
| YOLO imgsz | 1280 | 640 | 4x |
| Noise reduction | fastNlMeans | GaussianBlur | 10x |
| Auto-rotate | –í–∫–ª—é—á–µ–Ω | –í—ã–∫–ª—é—á–µ–Ω | 3x |
| Sharpening | –í–∫–ª—é—á–µ–Ω | –í—ã–∫–ª—é—á–µ–Ω | 1.5x |

### **–û–±—â–µ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ: ~5-8x —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!**

## ‚öñÔ∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:

### –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º (–ë–´–°–¢–†–´–ô):
```python
preprocessed_img = preprocess_for_yolo(img_cv, target_size=640, fast_mode=True)
yolo_detections = model(preprocessed_img, imgsz=640)
```

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** ~2-5 —Å–µ–∫—É–Ω–¥

### –†–µ–∂–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ (–ú–ï–î–õ–ï–ù–ù–´–ô):
–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `app.py`:

```python
preprocessed_img = preprocess_for_yolo(img_cv, target_size=1280, fast_mode=False)
yolo_detections = model(preprocessed_img, imgsz=1280)
```

–ò –≤ –Ω–∞—á–∞–ª–µ `process_pdf`:
```python
images = convert_from_bytes(pdf_bytes, dpi=300)
```

**–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** ~15-30 —Å–µ–∫—É–Ω–¥

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

### –î–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã (—Ç–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞):
- ‚úÖ DPI = 200
- ‚úÖ imgsz = 640
- ‚úÖ fast_mode = True
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:** –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, –¥–µ–º–æ, –ø—Ä–µ–≤—å—é

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏:
- ‚úÖ DPI = 300
- ‚úÖ imgsz = 1280  
- ‚úÖ fast_mode = False
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:** —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞–∂–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üîß –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å app.py

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ (~80-90):
```python
preprocessed_img = preprocess_for_yolo(img_cv, target_size=640, fast_mode=True)
yolo_detections = model(preprocessed_img, imgsz=640, ...)
```

–ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞:
```python
preprocessed_img = preprocess_for_yolo(img_cv, target_size=1280, fast_mode=False)
yolo_detections = model(preprocessed_img, imgsz=1280, ...)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ API

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `quality` –≤ –∑–∞–ø—Ä–æ—Å:

```python
quality = request.form.get('quality', 'fast')  # 'fast' –∏–ª–∏ 'high'

if quality == 'high':
    preprocessed_img = preprocess_for_yolo(img_cv, target_size=1280, fast_mode=False)
    yolo_detections = model(preprocessed_img, imgsz=1280)
else:
    preprocessed_img = preprocess_for_yolo(img_cv, target_size=640, fast_mode=True)
    yolo_detections = model(preprocessed_img, imgsz=640)
```

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º | –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º |
|---------|--------------|--------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê |
| –¢–æ—á–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π | 85-90% | 90-95% |
| –î–µ—Ç–µ–∫—Ü–∏—è —à—Ç–∞–º–ø–æ–≤ | 90-95% | 95-98% |
| –î–µ—Ç–µ–∫—Ü–∏—è QR | 95-98% | 98-99% |

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –º–µ–¥–ª–µ–Ω–Ω–æ:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU**
```bash
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

2. **–£–º–µ–Ω—å—à–∏—Ç–µ DPI –µ—â–µ –±–æ–ª—å—à–µ**
```python
images = convert_from_bytes(pdf_bytes, dpi=150)
```

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å YOLO**
```python
model = YOLO('yolov8n.pt')  # nano –º–æ–¥–µ–ª—å (—Å–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è)
```

4. **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥**
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
yolo_detections = model(img_cv, imgsz=640)
```

## üìù –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```
‚úì DPI: 200 (–±—ã—Å—Ç—Ä–æ)
‚úì YOLO imgsz: 640 (–±—ã—Å—Ç—Ä–æ)  
‚úì Preprocessing: FAST mode
‚úì Noise reduction: GaussianBlur
‚úì Auto-rotate: OFF
‚úì Deskew: ON
‚úì CLAHE: ON
‚úì Sharpening: OFF
```

## ‚è±Ô∏è –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø—Ä–∏–º–µ—Ä–Ω–æ–µ):

| –°—Ç—Ä–∞–Ω–∏—Ü | –ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º | –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º |
|---------|--------------|--------------|
| 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ | 2-3 —Å–µ–∫ | 15-20 —Å–µ–∫ |
| 5 —Å—Ç—Ä–∞–Ω–∏—Ü | 10-15 —Å–µ–∫ | 75-100 —Å–µ–∫ |
| 10 —Å—Ç—Ä–∞–Ω–∏—Ü | 20-30 —Å–µ–∫ | 150-200 —Å–µ–∫ |

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞  
**–†–µ–∂–∏–º:** FAST (–±—ã—Å—Ç—Ä—ã–π)  
**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** http://localhost:5001

